<div class="container">
  <div class="spinner-container" *ngIf="isLoading">
    <mat-progress-bar mode="indeterminate" color="accent"></mat-progress-bar>
  </div>

  <div class="mat-elevation-z8 table-container" >
    <span class="ml-1rem mr-1rem pageTitle">Client List</span>
    <button mat-raised-button color="primary"
    type="button" routerLink="client/add">+ Add New Client</button>
    <mat-form-field class="ml-1rem mr-1rem" style="width:200px">
      <mat-label>Search Clients</mat-label>
      <mat-hint>searches in Company Name and City</mat-hint>
      <input matInput #input>
    </mat-form-field>
    <br><br>
    <table mat-table [dataSource]="data" matSort>

      <!-- compName Column -->
      <ng-container matColumnDef="compName" [sticky]="true">
        <th mat-header-cell *matHeaderCellDef mat-sort-header class="mr-1percent w-12rem">Company</th>
        <td mat-cell *matCellDef="let row"> {{row.compName}} </td>
      </ng-container>

      <!-- city Column -->
      <ng-container matColumnDef="city">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> City </th>
        <td mat-cell *matCellDef="let row"> {{row.city}} </td>
      </ng-container>

      <!-- state Column -->
      <ng-container matColumnDef="state">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> State </th>
        <td mat-cell *matCellDef="let row"> {{row.state}} </td>
      </ng-container>

      <!-- comp Category Column -->
      <ng-container matColumnDef="compCat">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Category </th>
        <td mat-cell *matCellDef="let row"> {{row.compCat}} </td>
      </ng-container>

      <!-- comp Subcategory Column -->
      <ng-container matColumnDef="compSubcat">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Sub category </th>
        <td mat-cell *matCellDef="let row"> {{row.compSubcat}} </td>
      </ng-container>

      <!-- compCategory Column -->
      <ng-container matColumnDef="compClass">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Class </th>
        <td mat-cell *matCellDef="let row"> {{row.compClass}} </td>
      </ng-container>

      <!-- delete Column -->
      <ng-container matColumnDef="delete">
        <th mat-header-cell *matHeaderCellDef class="w-1rem"></th>
        <td mat-cell *matCellDef="let row">
          <button mat-icon-button matTooltip="Delete Client" matTooltipClass="tooltip-red"
           (click)="onDeleteClient(row._id)">
            <mat-icon color="warn">delete_outline</mat-icon>
          </button>
        </td>
      </ng-container>

      <!-- edit Column -->
      <ng-container matColumnDef="edit" [stickyEnd]="true">
        <th mat-header-cell *matHeaderCellDef class="w-1rem"></th>
        <td mat-cell *matCellDef="let row">
          <button mat-icon-button
            matTooltip="Edit Client"
            [routerLink]="['../../client/edit', row._id]">
            <mat-icon color="primary">create</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

      <!-- Row shown when there is no matching data. -->
      <tr *matNoDataRow>
        <td class="mat-cell" colspan="4" style="color: red;">No clients found</td>
      </tr>
    </table>

    <mat-paginator [length]='totalClients' [pageSize]='5' [pageSizeOptions]="[5, 10, 25, 50]"></mat-paginator>
  </div>
</div>
